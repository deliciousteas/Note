# 进程和线程

unix和linux操作系统上都提供了fork（）系统来创建进程，调用fork()函数的是父进程，可以创建子进程（child process)。在python中实际上运行的*.py文件的main函数是父进程，内部的函数全是子进程。

## 多进程   



在python中创建子进程是用multiprocessing模块的Process类来创建子进程

案例代码如下所示：

`from multiprocessing import Process  

from os import getpid

from random import randint
from time import time, sleep
def download_task(filename):
    print('启动下载进程，进程号[%d].' % getpid())
    print('开始下载%s...' % filename)
    time_to_download = randint(5, 10)
    sleep(time_to_download)
    print('%s下载完成! 耗费了%d秒' % (filename, time_to_download))

def main():
    start = time()
    p1 = Process(target=download_task, args=('Python从入门到住院.pdf', ))
    p1.start()
    p2 = Process(target=download_task, args=('Peking Hot.avi', ))
    p2.start()
    p1.join()
    p2.join()
    end = time()
    print('总共耗费了%.2f秒.' % (end - start))

if __name__ == '__main__':
    main()`

1. Multiprocess是模块module，Process是其中的一个class
2. `class Process(process.BaseProcess)` 。
   1. 查看源码，class的（）括号中表示该class继承关系，即该class继承process.BaseProcess
   2. `_start_method  `、 `def _Popen(process_obj)` 在class内用下划线_开头是默认的私有变量不希望被篡改。同时`@staticmethod` 注释器说明该method是静态方法。
3. process.BaseProcess
   1. `def __init__(self, group=None, target=None, name=None, args=(), kwargs={},*, daemon=None)`  
      1. 构造函数中参数很多，其实target是目标执行函数，args和kargs分别是target的传递参数。
      2. 因为process是python自带的模块类，查阅官方文档。讲解最清楚。cite：[target、args、kargs](https://docs.python.org/3/library/multiprocessing.html)
      3. start()和join()method作用，其实看源码和官方文档最清楚。所以，源码->google->offcial-docu

4. 每个子进有自己的内存空间。有多个进程共享的队列，可以用Queue类。